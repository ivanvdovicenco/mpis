# MPIS Genesis API - Environment Variables
# Copy this file to .env and fill in the values

# ========================================
# Application Settings
# ========================================
APP_NAME=MPIS Genesis API
APP_VERSION=1.0.0
DEBUG=false

# Set to true to mock LLM calls for testing
DRY_RUN=false

# ========================================
# Database Configuration
# ========================================
# PostgreSQL connection string (using internal Docker DNS)
DATABASE_URL=postgresql+asyncpg://mpis:YOUR_PASSWORD_HERE@mpis-postgres:5432/mpis

# Connection pool settings
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20

# ========================================
# Qdrant Vector Store
# ========================================
# Qdrant URL (using internal Docker DNS)
QDRANT_URL=http://mpis-qdrant:6333

# Optional API key if Qdrant is secured
# QDRANT_API_KEY=

# Collection names
QDRANT_COLLECTION_SOURCES=persona_sources_embeddings
QDRANT_COLLECTION_CORE=persona_core_embeddings

# Embedding dimension (1536 for OpenAI text-embedding-3-small)
EMBEDDING_DIMENSION=1536

# ========================================
# LLM Configuration
# ========================================
# Provider: "openai" or "anthropic"
LLM_PROVIDER=openai

# API Keys (set one based on provider)
OPENAI_API_KEY=sk-your-openai-key-here
# ANTHROPIC_API_KEY=sk-ant-your-anthropic-key-here

# Model settings
LLM_MODEL=gpt-4-turbo-preview
LLM_MAX_TOKENS=4096
LLM_TEMPERATURE=0.7

# Embedding model (OpenAI only)
EMBEDDING_MODEL=text-embedding-3-small

# ========================================
# File Paths
# ========================================
# Directory containing youtube_links.txt
YOUTUBE_LINKS_DIR=/opt/mpis/input

# Filename for YouTube links
YOUTUBE_LINKS_FILENAME=youtube_links.txt

# Base directory for persona exports
PERSONAS_BASE_DIR=/opt/mpis/personas

# Base directory for source materials
SOURCES_BASE_DIR=/opt/mpis/sources

# Directory for secrets (service accounts, etc.)
SECRETS_DIR=/opt/mpis/secrets

# ========================================
# Google Drive Integration
# ========================================
# Path to Google service account JSON file
GDRIVE_SERVICE_ACCOUNT_JSON_PATH=/opt/mpis/secrets/gdrive_sa.json

# ========================================
# Public Persona Web Enrichment
# ========================================
# Maximum number of web sources to fetch
PUBLIC_WEB_MAX_SOURCES=20

# Optional: Comma-separated list of allowed domains
# PUBLIC_WEB_ALLOWED_DOMAINS=wikipedia.org,britannica.com

# Optional: Comma-separated list of denied domains
# PUBLIC_WEB_DENIED_DOMAINS=reddit.com,twitter.com

# SerpAPI key for web search (optional, falls back to Wikipedia)
# SERPAPI_API_KEY=your-serpapi-key

# Web request timeout in seconds
WEB_REQUEST_TIMEOUT=30

# Delay between web requests (rate limiting)
WEB_REQUEST_DELAY=1.0

# Maximum characters for web content summaries (to avoid storing full copyrighted content)
WEB_SUMMARY_MAX_CHARS=500

# ========================================
# Text Chunking
# ========================================
# Minimum tokens per chunk
CHUNK_MIN_TOKENS=500

# Maximum tokens per chunk
CHUNK_MAX_TOKENS=1200

# Overlap tokens between chunks
CHUNK_OVERLAP_TOKENS=100

# ========================================
# API Server
# ========================================
API_HOST=0.0.0.0
API_PORT=8080
